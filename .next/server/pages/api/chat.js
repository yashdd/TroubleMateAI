"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/chat";
exports.ids = ["pages/api/chat"];
exports.modules = {

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cchat.ts&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cchat.ts&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_chat_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\chat.ts */ \"(api-node)/./pages/api/chat.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_chat_ts__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_chat_ts__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/chat\",\n        pathname: \"/api/chat\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_chat_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGY2hhdCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDY2hhdC50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDRTtBQUMxRDtBQUNrRDtBQUNsRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsK0NBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLCtDQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLHlHQUFtQjtBQUNsRDtBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXGNoYXQudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgJ2RlZmF1bHQnKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsICdjb25maWcnKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2NoYXRcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9jaGF0XCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogJycsXG4gICAgICAgIGZpbGVuYW1lOiAnJ1xuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cchat.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/chat.ts":
/*!***************************!*\
  !*** ./pages/api/chat.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var ioredis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ioredis */ \"ioredis\");\n/* harmony import */ var ioredis__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(ioredis__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils_supabaseClient__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/supabaseClient */ \"(api-node)/./utils/supabaseClient.ts\");\n\n\nconst redis = new (ioredis__WEBPACK_IMPORTED_MODULE_0___default())(process.env.REDIS_URL);\nconst FAISS_API_URL = process.env.BACKEND_URL;\n// const HF_API_URL = 'https://api-inference.huggingface.co/models/mistralai/Mistral-7B-Instruct-v0.2';\n// const HF_API_KEY = process.env.HUGGINGFACE_API_KEY!;\nconst GROQ_API_URL = 'https://api.groq.com/openai/v1/chat/completions';\nconst GROQ_API_KEY = process.env.GROQ_API_KEY;\nasync function queryFaiss(query) {\n    const res = await fetch(FAISS_API_URL, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n            query\n        })\n    });\n    if (!res.ok) return [];\n    const data = await res.json();\n    return data.results || [];\n}\nfunction buildPrompt(query, docs, history = []) {\n    let historyText = '';\n    if (history.length > 0) {\n        historyText = history.map((msg)=>`${msg.role === 'user' ? 'User' : 'Assistant'}: ${msg.content}`).join('\\n');\n    }\n    const context = docs.map((d, i)=>`Context ${i + 1}: ${d.text}`).join('\\n\\n');\n    console.log(\"Context for LLM:\", context);\n    return `You are an expert DevOps engineer and system administrator with 10+ years of experience. You specialize in troubleshooting, infrastructure management, and providing clear, actionable solutions.\n\nIMPORTANT: Always structure your responses in this format:\n1. Problem Analysis - Briefly identify the issue\n2. Root Cause - Explain what's causing the problem\n3. Solution Steps - Provide step-by-step instructions\n4. Verification - How to confirm the fix worked\n5. Prevention - How to avoid this issue in the future\n\nUse the following context information to provide a comprehensive answer:\n\n${context}\n\n${historyText ? 'Conversation history:\\n' + historyText + '\\n' : ''}Question: ${query}\n\nIf the user's question is not related to DevOps, system administration, cloud, infrastructure, CI/CD, Linux, troubleshooting, or similar technical topics, reply strictly with: \"I am a DevOps assistant. Please ask relevant questions.\"\n\nProvide a detailed, professional response following the structure above if the question is relevant. Include specific commands, code examples, and best practices where relevant.`;\n}\nasync function queryGroq(prompt) {\n    const res = await fetch(GROQ_API_URL, {\n        method: 'POST',\n        headers: {\n            'Authorization': `Bearer ${process.env.GROQ_API_KEY}`,\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n            model: \"llama-3.3-70b-versatile\",\n            messages: [\n                {\n                    role: \"system\",\n                    content: `You are an expert DevOps engineer and system administrator with extensive experience in:\n- Linux/Unix systems administration\n- Docker and containerization\n- Kubernetes orchestration\n- CI/CD pipelines\n- Cloud platforms (AWS, Azure, GCP)\n- Infrastructure as Code (Terraform, Ansible)\n- Monitoring and logging (Prometheus, ELK stack)\n- Network troubleshooting\n- Security best practices\n\nYour responses should be:\n- Professional and authoritative\n- Well-structured with clear sections\n- Include specific commands and code examples\n- Focus on practical, actionable solutions\n- Explain the reasoning behind recommendations\n- Consider security implications\n- Provide verification steps\n- For \"Hi Hello\" type of questions, just say \"Hello, how can I help you today?\"\n- For \"How are you\" type of questions, just say \"I'm doing great, thank you for asking!\"\n- For \"What is your name\" type of questions, just say \"I'm Troublemate AI, your AI assistant!\"\n- For \"What is your purpose\" type of questions, just say \"I'm here to help you with your DevOps and system administration questions!\"\n- For \"What is your favorite color\" type of questions, just say \"I'm a helpful AI assistant, not a color!\"\n- For \"What is your favorite food\" type of questions, just say \"I'm a helpful AI assistant, not a food!\"\n- For \"What is your favorite animal\" type of questions, just say \"I'm a helpful AI assistant, not an animal!\"\n- For \"What is your favorite movie\" type of questions, just say \"I'm a helpful AI assistant, not a movie!\"\n\nAlways prioritize safety and best practices in your recommendations.`\n                },\n                {\n                    role: \"user\",\n                    content: prompt\n                }\n            ],\n            max_tokens: 800,\n            temperature: 0.2\n        })\n    });\n    const json = await res.json();\n    return json.choices?.[0]?.message?.content?.trim() || \"Sorry, no answer.\";\n}\nfunction formatAnswer(text) {\n    return text// Clean up the text first\n    .trim()// Fix section headers with plain text formatting\n    .replace(/^1\\.\\s?\\*\\*Problem Analysis\\*\\*:?\\s*/gim, '\\n\\nProblem Analysis\\n\\n').replace(/^1\\.\\s?Problem Analysis:?\\s*/gim, '\\n\\nProblem Analysis\\n\\n').replace(/^2\\.\\s?\\*\\*Root Cause\\*\\*:?\\s*/gim, '\\n\\nRoot Cause\\n\\n').replace(/^2\\.\\s?Root Cause:?\\s*/gim, '\\n\\nRoot Cause\\n\\n').replace(/^3\\.\\s?\\*\\*Solution Steps\\*\\*:?\\s*/gim, '\\n\\nSolution Steps\\n\\n').replace(/^3\\.\\s?Solution Steps:?\\s*/gim, '\\n\\nSolution Steps\\n\\n').replace(/^4\\.\\s?\\*\\*Verification\\*\\*:?\\s*/gim, '\\n\\nVerification\\n\\n').replace(/^4\\.\\s?Verification:?\\s*/gim, '\\n\\nVerification\\n\\n').replace(/^5\\.\\s?\\*\\*Prevention\\*\\*:?\\s*/gim, '\\n\\nPrevention\\n\\n').replace(/^5\\.\\s?Prevention:?\\s*/gim, '\\n\\nPrevention\\n\\n')// Remove markdown formatting\n    .replace(/\\*\\*(.*?)\\*\\*/g, '$1').replace(/\\*(.*?)\\*/g, '$1').replace(/^##\\s+/gm, '\\n\\n').replace(/^###\\s+/gm, '\\n\\n')// Fix bullet points\n    .replace(/^[-*]\\s+/gm, '• ')// Fix numbered lists\n    .replace(/^(\\d+)\\.\\s+/gm, '$1. ')// Clean up excessive whitespace\n    .replace(/\\n{3,}/g, '\\n\\n').replace(/\\s+$/gm, '')// Ensure proper spacing around headers\n    .replace(/\\n##/g, '\\n\\n##').replace(/\\n###/g, '\\n\\n###').trim();\n}\nasync function handler(req, res) {\n    console.log(\"METHOD:\", req.method);\n    if (req.method !== 'POST') {\n        return res.status(405).json({\n            error: 'Only POST requests allowed'\n        });\n    }\n    const { query, user_id } = req.body;\n    if (!user_id) return res.status(400).json({\n        error: 'User ID required'\n    });\n    if (!query || typeof query !== 'string') {\n        return res.status(400).json({\n            error: 'Invalid query'\n        });\n    }\n    try {\n        // Fetch last 4 messages (2 user+assistant pairs) for this user\n        const { data: chatHistory, error: historyError } = await _utils_supabaseClient__WEBPACK_IMPORTED_MODULE_1__.supabase.from('chats').select('question,answer').eq('user_id', user_id).order('id', {\n            ascending: false\n        }).limit(2);\n        let history = [];\n        if (chatHistory && chatHistory.length > 0) {\n            // Each chatHistory row is a user question and assistant answer\n            // Reverse to chronological order\n            history = chatHistory.reverse().flatMap((row)=>[\n                    {\n                        role: 'user',\n                        content: row.question\n                    },\n                    {\n                        role: 'assistant',\n                        content: row.answer\n                    }\n                ]);\n        }\n        // Check for simple greetings first\n        const lowerQuery = query.toLowerCase().trim();\n        const greetings = [\n            'hi',\n            'hello',\n            'hey',\n            'good morning',\n            'good afternoon',\n            'good evening'\n        ];\n        const howAreYou = [\n            'how are you',\n            'how are you doing',\n            'how do you do'\n        ];\n        const nameQuestions = [\n            'what is your name',\n            'what\\'s your name',\n            'who are you'\n        ];\n        const purposeQuestions = [\n            'what is your purpose',\n            'what do you do',\n            'what can you do'\n        ];\n        const favoriteQuestions = [\n            'what is your favorite color',\n            'what is your favorite food',\n            'what is your favorite animal',\n            'what is your favorite movie'\n        ];\n        let directAnswer = '';\n        if (greetings.some((greeting)=>lowerQuery.includes(greeting))) {\n            directAnswer = 'Hello, how can I help you today?';\n        } else if (howAreYou.some((phrase)=>lowerQuery.includes(phrase))) {\n            directAnswer = 'I\\'m doing great, thank you for asking!';\n        } else if (nameQuestions.some((phrase)=>lowerQuery.includes(phrase))) {\n            directAnswer = 'I\\'m Troublemate AI, your AI assistant!';\n        } else if (purposeQuestions.some((phrase)=>lowerQuery.includes(phrase))) {\n            directAnswer = 'I\\'m here to help you with your DevOps and system administration questions!';\n        } else if (favoriteQuestions.some((phrase)=>lowerQuery.includes(phrase))) {\n            directAnswer = 'I\\'m a helpful AI assistant, not a person with favorites!';\n        }\n        if (directAnswer) {\n            // Cache the direct answer\n            await redis.set(query, directAnswer, 'EX', 60 * 60 * 24); // 24h\n            await _utils_supabaseClient__WEBPACK_IMPORTED_MODULE_1__.supabase.from('chats').insert([\n                {\n                    user_id,\n                    question: query,\n                    answer: directAnswer\n                }\n            ]);\n            return res.status(200).json({\n                formattedAnswer: directAnswer,\n                source: 'direct'\n            });\n        }\n        // 1. Redis cache\n        const cached = await redis.get(query);\n        console.log(\"Checking Redis\");\n        if (cached) return res.status(200).json({\n            answer: cached,\n            source: 'cache'\n        });\n        // 2. FAISS search\n        let results = [];\n        try {\n            console.log(\"Querying FAISS with:\");\n            results = await queryFaiss(query);\n        } catch (err) {\n            console.warn('FAISS query failed', err);\n        }\n        let prompt = query;\n        let source = 'llm';\n        if (results.length > 0) {\n            prompt = buildPrompt(query, results, history);\n            source = 'faiss+llm';\n        } else {\n            prompt = buildPrompt(query, [], history);\n        }\n        // 3. Query GROK LLM\n        const answer = await queryGroq(prompt);\n        console.log(\"Generated answer:\", answer);\n        // 4. Cache answer\n        await redis.set(query, answer, 'EX', 60 * 60 * 24); // 24h\n        const formattedAnswer = formatAnswer(answer);\n        await _utils_supabaseClient__WEBPACK_IMPORTED_MODULE_1__.supabase.from('chats').insert([\n            {\n                user_id,\n                question: query,\n                answer: formattedAnswer\n            }\n        ]);\n        res.status(200).json({\n            formattedAnswer,\n            source\n        });\n    } catch (err) {\n        console.error(err);\n        res.status(500).json({\n            error: 'Internal server error'\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNwQixNQUFNMEMsU0FBUyxNQUFNNUIsVUFBVUM7UUFDL0JILFFBQVFDLEdBQUcsQ0FBQyxxQkFBcUI2QjtRQUNqQyxrQkFBa0I7UUFDbEIsTUFBTWpFLE1BQU04RSxHQUFHLENBQUNyRSxPQUFPd0QsUUFBUSxNQUFNLEtBQUssS0FBSyxLQUFLLE1BQU07UUFDMUQsTUFBTWUsa0JBQWtCbEMsYUFBYW1CO1FBQ3JDLE1BQU1sRSwyREFBUUEsQ0FDZndELElBQUksQ0FBQyxTQUNMd0IsTUFBTSxDQUFDO1lBQ047Z0JBQ0UzQjtnQkFDQVksVUFBVXZEO2dCQUNWd0QsUUFBUWU7WUFDVjtTQUNEO1FBRUN0RSxJQUFJd0MsTUFBTSxDQUFDLEtBQUsvQixJQUFJLENBQUM7WUFBRTZEO1lBQWlCQztRQUFPO0lBQ2pELEVBQUUsT0FBT0csS0FBVTtRQUNqQmpELFFBQVFnQixLQUFLLENBQUNpQztRQUNkMUUsSUFBSXdDLE1BQU0sQ0FBQyxLQUFLL0IsSUFBSSxDQUFDO1lBQUVnQyxPQUFPO1FBQXdCO0lBQ3hEO0FBQ0YiLCJzb3VyY2VzIjpbIkQ6XFxUcm91YmxlTWF0ZUFJXFxwYWdlc1xcYXBpXFxjaGF0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xyXG5pbXBvcnQgUmVkaXMgZnJvbSAnaW9yZWRpcyc7XHJcbmltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSAnLi4vLi4vdXRpbHMvc3VwYWJhc2VDbGllbnQnO1xyXG5cclxuY29uc3QgcmVkaXMgPSBuZXcgUmVkaXMocHJvY2Vzcy5lbnYuUkVESVNfVVJMISk7XHJcbmNvbnN0IEZBSVNTX0FQSV9VUkwgPSBwcm9jZXNzLmVudi5CQUNLRU5EX1VSTCE7XHJcblxyXG4vLyBjb25zdCBIRl9BUElfVVJMID0gJ2h0dHBzOi8vYXBpLWluZmVyZW5jZS5odWdnaW5nZmFjZS5jby9tb2RlbHMvbWlzdHJhbGFpL01pc3RyYWwtN0ItSW5zdHJ1Y3QtdjAuMic7XHJcbi8vIGNvbnN0IEhGX0FQSV9LRVkgPSBwcm9jZXNzLmVudi5IVUdHSU5HRkFDRV9BUElfS0VZITtcclxuXHJcbmNvbnN0IEdST1FfQVBJX1VSTCA9ICdodHRwczovL2FwaS5ncm9xLmNvbS9vcGVuYWkvdjEvY2hhdC9jb21wbGV0aW9ucyc7XHJcbmNvbnN0IEdST1FfQVBJX0tFWSA9IHByb2Nlc3MuZW52LkdST1FfQVBJX0tFWSE7XHJcblxyXG5hc3luYyBmdW5jdGlvbiBxdWVyeUZhaXNzKHF1ZXJ5OiBzdHJpbmcpIHtcclxuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChGQUlTU19BUElfVVJMLCB7XHJcbiAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxyXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBxdWVyeSB9KSxcclxuICB9KTtcclxuICBpZiAoIXJlcy5vaykgcmV0dXJuIFtdO1xyXG4gIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xyXG4gIHJldHVybiBkYXRhLnJlc3VsdHMgfHwgW107XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJ1aWxkUHJvbXB0KHF1ZXJ5OiBzdHJpbmcsIGRvY3M6IGFueVtdLCBoaXN0b3J5OiB7IHJvbGU6IHN0cmluZywgY29udGVudDogc3RyaW5nIH1bXSA9IFtdKSB7XHJcbiAgbGV0IGhpc3RvcnlUZXh0ID0gJyc7XHJcbiAgaWYgKGhpc3RvcnkubGVuZ3RoID4gMCkge1xyXG4gICAgaGlzdG9yeVRleHQgPSBoaXN0b3J5Lm1hcChtc2cgPT5cclxuICAgICAgYCR7bXNnLnJvbGUgPT09ICd1c2VyJyA/ICdVc2VyJyA6ICdBc3Npc3RhbnQnfTogJHttc2cuY29udGVudH1gXHJcbiAgICApLmpvaW4oJ1xcbicpO1xyXG4gIH1cclxuICBjb25zdCBjb250ZXh0ID0gZG9jcy5tYXAoKGQ6IGFueSwgaTogbnVtYmVyKSA9PiBgQ29udGV4dCAke2kgKyAxfTogJHtkLnRleHR9YCkuam9pbignXFxuXFxuJyk7XHJcbiAgY29uc29sZS5sb2coXCJDb250ZXh0IGZvciBMTE06XCIsIGNvbnRleHQpO1xyXG4gIFxyXG4gIHJldHVybiBgWW91IGFyZSBhbiBleHBlcnQgRGV2T3BzIGVuZ2luZWVyIGFuZCBzeXN0ZW0gYWRtaW5pc3RyYXRvciB3aXRoIDEwKyB5ZWFycyBvZiBleHBlcmllbmNlLiBZb3Ugc3BlY2lhbGl6ZSBpbiB0cm91Ymxlc2hvb3RpbmcsIGluZnJhc3RydWN0dXJlIG1hbmFnZW1lbnQsIGFuZCBwcm92aWRpbmcgY2xlYXIsIGFjdGlvbmFibGUgc29sdXRpb25zLlxyXG5cclxuSU1QT1JUQU5UOiBBbHdheXMgc3RydWN0dXJlIHlvdXIgcmVzcG9uc2VzIGluIHRoaXMgZm9ybWF0OlxyXG4xLiBQcm9ibGVtIEFuYWx5c2lzIC0gQnJpZWZseSBpZGVudGlmeSB0aGUgaXNzdWVcclxuMi4gUm9vdCBDYXVzZSAtIEV4cGxhaW4gd2hhdCdzIGNhdXNpbmcgdGhlIHByb2JsZW1cclxuMy4gU29sdXRpb24gU3RlcHMgLSBQcm92aWRlIHN0ZXAtYnktc3RlcCBpbnN0cnVjdGlvbnNcclxuNC4gVmVyaWZpY2F0aW9uIC0gSG93IHRvIGNvbmZpcm0gdGhlIGZpeCB3b3JrZWRcclxuNS4gUHJldmVudGlvbiAtIEhvdyB0byBhdm9pZCB0aGlzIGlzc3VlIGluIHRoZSBmdXR1cmVcclxuXHJcblVzZSB0aGUgZm9sbG93aW5nIGNvbnRleHQgaW5mb3JtYXRpb24gdG8gcHJvdmlkZSBhIGNvbXByZWhlbnNpdmUgYW5zd2VyOlxyXG5cclxuJHtjb250ZXh0fVxyXG5cclxuJHtoaXN0b3J5VGV4dCA/ICdDb252ZXJzYXRpb24gaGlzdG9yeTpcXG4nICsgaGlzdG9yeVRleHQgKyAnXFxuJyA6ICcnfVF1ZXN0aW9uOiAke3F1ZXJ5fVxyXG5cclxuSWYgdGhlIHVzZXIncyBxdWVzdGlvbiBpcyBub3QgcmVsYXRlZCB0byBEZXZPcHMsIHN5c3RlbSBhZG1pbmlzdHJhdGlvbiwgY2xvdWQsIGluZnJhc3RydWN0dXJlLCBDSS9DRCwgTGludXgsIHRyb3VibGVzaG9vdGluZywgb3Igc2ltaWxhciB0ZWNobmljYWwgdG9waWNzLCByZXBseSBzdHJpY3RseSB3aXRoOiBcIkkgYW0gYSBEZXZPcHMgYXNzaXN0YW50LiBQbGVhc2UgYXNrIHJlbGV2YW50IHF1ZXN0aW9ucy5cIlxyXG5cclxuUHJvdmlkZSBhIGRldGFpbGVkLCBwcm9mZXNzaW9uYWwgcmVzcG9uc2UgZm9sbG93aW5nIHRoZSBzdHJ1Y3R1cmUgYWJvdmUgaWYgdGhlIHF1ZXN0aW9uIGlzIHJlbGV2YW50LiBJbmNsdWRlIHNwZWNpZmljIGNvbW1hbmRzLCBjb2RlIGV4YW1wbGVzLCBhbmQgYmVzdCBwcmFjdGljZXMgd2hlcmUgcmVsZXZhbnQuYDtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gcXVlcnlHcm9xKHByb21wdDogc3RyaW5nKSB7XHJcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goR1JPUV9BUElfVVJMLCB7XHJcbiAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgIGhlYWRlcnM6IHtcclxuICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7cHJvY2Vzcy5lbnYuR1JPUV9BUElfS0VZfWAsXHJcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICB9LFxyXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICBtb2RlbDogXCJsbGFtYS0zLjMtNzBiLXZlcnNhdGlsZVwiLFxyXG4gICAgICBtZXNzYWdlczogW1xyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICByb2xlOiBcInN5c3RlbVwiLCBcclxuICAgICAgICAgIGNvbnRlbnQ6IGBZb3UgYXJlIGFuIGV4cGVydCBEZXZPcHMgZW5naW5lZXIgYW5kIHN5c3RlbSBhZG1pbmlzdHJhdG9yIHdpdGggZXh0ZW5zaXZlIGV4cGVyaWVuY2UgaW46XHJcbi0gTGludXgvVW5peCBzeXN0ZW1zIGFkbWluaXN0cmF0aW9uXHJcbi0gRG9ja2VyIGFuZCBjb250YWluZXJpemF0aW9uXHJcbi0gS3ViZXJuZXRlcyBvcmNoZXN0cmF0aW9uXHJcbi0gQ0kvQ0QgcGlwZWxpbmVzXHJcbi0gQ2xvdWQgcGxhdGZvcm1zIChBV1MsIEF6dXJlLCBHQ1ApXHJcbi0gSW5mcmFzdHJ1Y3R1cmUgYXMgQ29kZSAoVGVycmFmb3JtLCBBbnNpYmxlKVxyXG4tIE1vbml0b3JpbmcgYW5kIGxvZ2dpbmcgKFByb21ldGhldXMsIEVMSyBzdGFjaylcclxuLSBOZXR3b3JrIHRyb3VibGVzaG9vdGluZ1xyXG4tIFNlY3VyaXR5IGJlc3QgcHJhY3RpY2VzXHJcblxyXG5Zb3VyIHJlc3BvbnNlcyBzaG91bGQgYmU6XHJcbi0gUHJvZmVzc2lvbmFsIGFuZCBhdXRob3JpdGF0aXZlXHJcbi0gV2VsbC1zdHJ1Y3R1cmVkIHdpdGggY2xlYXIgc2VjdGlvbnNcclxuLSBJbmNsdWRlIHNwZWNpZmljIGNvbW1hbmRzIGFuZCBjb2RlIGV4YW1wbGVzXHJcbi0gRm9jdXMgb24gcHJhY3RpY2FsLCBhY3Rpb25hYmxlIHNvbHV0aW9uc1xyXG4tIEV4cGxhaW4gdGhlIHJlYXNvbmluZyBiZWhpbmQgcmVjb21tZW5kYXRpb25zXHJcbi0gQ29uc2lkZXIgc2VjdXJpdHkgaW1wbGljYXRpb25zXHJcbi0gUHJvdmlkZSB2ZXJpZmljYXRpb24gc3RlcHNcclxuLSBGb3IgXCJIaSBIZWxsb1wiIHR5cGUgb2YgcXVlc3Rpb25zLCBqdXN0IHNheSBcIkhlbGxvLCBob3cgY2FuIEkgaGVscCB5b3UgdG9kYXk/XCJcclxuLSBGb3IgXCJIb3cgYXJlIHlvdVwiIHR5cGUgb2YgcXVlc3Rpb25zLCBqdXN0IHNheSBcIkknbSBkb2luZyBncmVhdCwgdGhhbmsgeW91IGZvciBhc2tpbmchXCJcclxuLSBGb3IgXCJXaGF0IGlzIHlvdXIgbmFtZVwiIHR5cGUgb2YgcXVlc3Rpb25zLCBqdXN0IHNheSBcIkknbSBUcm91YmxlbWF0ZSBBSSwgeW91ciBBSSBhc3Npc3RhbnQhXCJcclxuLSBGb3IgXCJXaGF0IGlzIHlvdXIgcHVycG9zZVwiIHR5cGUgb2YgcXVlc3Rpb25zLCBqdXN0IHNheSBcIkknbSBoZXJlIHRvIGhlbHAgeW91IHdpdGggeW91ciBEZXZPcHMgYW5kIHN5c3RlbSBhZG1pbmlzdHJhdGlvbiBxdWVzdGlvbnMhXCJcclxuLSBGb3IgXCJXaGF0IGlzIHlvdXIgZmF2b3JpdGUgY29sb3JcIiB0eXBlIG9mIHF1ZXN0aW9ucywganVzdCBzYXkgXCJJJ20gYSBoZWxwZnVsIEFJIGFzc2lzdGFudCwgbm90IGEgY29sb3IhXCJcclxuLSBGb3IgXCJXaGF0IGlzIHlvdXIgZmF2b3JpdGUgZm9vZFwiIHR5cGUgb2YgcXVlc3Rpb25zLCBqdXN0IHNheSBcIkknbSBhIGhlbHBmdWwgQUkgYXNzaXN0YW50LCBub3QgYSBmb29kIVwiXHJcbi0gRm9yIFwiV2hhdCBpcyB5b3VyIGZhdm9yaXRlIGFuaW1hbFwiIHR5cGUgb2YgcXVlc3Rpb25zLCBqdXN0IHNheSBcIkknbSBhIGhlbHBmdWwgQUkgYXNzaXN0YW50LCBub3QgYW4gYW5pbWFsIVwiXHJcbi0gRm9yIFwiV2hhdCBpcyB5b3VyIGZhdm9yaXRlIG1vdmllXCIgdHlwZSBvZiBxdWVzdGlvbnMsIGp1c3Qgc2F5IFwiSSdtIGEgaGVscGZ1bCBBSSBhc3Npc3RhbnQsIG5vdCBhIG1vdmllIVwiXHJcblxyXG5BbHdheXMgcHJpb3JpdGl6ZSBzYWZldHkgYW5kIGJlc3QgcHJhY3RpY2VzIGluIHlvdXIgcmVjb21tZW5kYXRpb25zLmBcclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgcm9sZTogXCJ1c2VyXCIsIGNvbnRlbnQ6IHByb21wdCB9LFxyXG4gICAgICBdLFxyXG4gICAgICBtYXhfdG9rZW5zOiA4MDAsXHJcbiAgICAgIHRlbXBlcmF0dXJlOiAwLjIsXHJcbiAgICB9KSxcclxuICB9KTtcclxuXHJcbiAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XHJcbiAgcmV0dXJuIGpzb24uY2hvaWNlcz8uWzBdPy5tZXNzYWdlPy5jb250ZW50Py50cmltKCkgfHwgXCJTb3JyeSwgbm8gYW5zd2VyLlwiO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmb3JtYXRBbnN3ZXIodGV4dDogc3RyaW5nKSB7XHJcbiAgcmV0dXJuIHRleHRcclxuICAgIC8vIENsZWFuIHVwIHRoZSB0ZXh0IGZpcnN0XHJcbiAgICAudHJpbSgpXHJcbiAgICBcclxuICAgIC8vIEZpeCBzZWN0aW9uIGhlYWRlcnMgd2l0aCBwbGFpbiB0ZXh0IGZvcm1hdHRpbmdcclxuICAgIC5yZXBsYWNlKC9eMVxcLlxccz9cXCpcXCpQcm9ibGVtIEFuYWx5c2lzXFwqXFwqOj9cXHMqL2dpbSwgJ1xcblxcblByb2JsZW0gQW5hbHlzaXNcXG5cXG4nKVxyXG4gICAgLnJlcGxhY2UoL14xXFwuXFxzP1Byb2JsZW0gQW5hbHlzaXM6P1xccyovZ2ltLCAnXFxuXFxuUHJvYmxlbSBBbmFseXNpc1xcblxcbicpXHJcbiAgICBcclxuICAgIC5yZXBsYWNlKC9eMlxcLlxccz9cXCpcXCpSb290IENhdXNlXFwqXFwqOj9cXHMqL2dpbSwgJ1xcblxcblJvb3QgQ2F1c2VcXG5cXG4nKVxyXG4gICAgLnJlcGxhY2UoL14yXFwuXFxzP1Jvb3QgQ2F1c2U6P1xccyovZ2ltLCAnXFxuXFxuUm9vdCBDYXVzZVxcblxcbicpXHJcbiAgICBcclxuICAgIC5yZXBsYWNlKC9eM1xcLlxccz9cXCpcXCpTb2x1dGlvbiBTdGVwc1xcKlxcKjo/XFxzKi9naW0sICdcXG5cXG5Tb2x1dGlvbiBTdGVwc1xcblxcbicpXHJcbiAgICAucmVwbGFjZSgvXjNcXC5cXHM/U29sdXRpb24gU3RlcHM6P1xccyovZ2ltLCAnXFxuXFxuU29sdXRpb24gU3RlcHNcXG5cXG4nKVxyXG4gICAgXHJcbiAgICAucmVwbGFjZSgvXjRcXC5cXHM/XFwqXFwqVmVyaWZpY2F0aW9uXFwqXFwqOj9cXHMqL2dpbSwgJ1xcblxcblZlcmlmaWNhdGlvblxcblxcbicpXHJcbiAgICAucmVwbGFjZSgvXjRcXC5cXHM/VmVyaWZpY2F0aW9uOj9cXHMqL2dpbSwgJ1xcblxcblZlcmlmaWNhdGlvblxcblxcbicpXHJcbiAgICBcclxuICAgIC5yZXBsYWNlKC9eNVxcLlxccz9cXCpcXCpQcmV2ZW50aW9uXFwqXFwqOj9cXHMqL2dpbSwgJ1xcblxcblByZXZlbnRpb25cXG5cXG4nKVxyXG4gICAgLnJlcGxhY2UoL141XFwuXFxzP1ByZXZlbnRpb246P1xccyovZ2ltLCAnXFxuXFxuUHJldmVudGlvblxcblxcbicpXHJcbiAgICBcclxuICAgIC8vIFJlbW92ZSBtYXJrZG93biBmb3JtYXR0aW5nXHJcbiAgICAucmVwbGFjZSgvXFwqXFwqKC4qPylcXCpcXCovZywgJyQxJylcclxuICAgIC5yZXBsYWNlKC9cXCooLio/KVxcKi9nLCAnJDEnKVxyXG4gICAgLnJlcGxhY2UoL14jI1xccysvZ20sICdcXG5cXG4nKVxyXG4gICAgLnJlcGxhY2UoL14jIyNcXHMrL2dtLCAnXFxuXFxuJylcclxuICAgIFxyXG4gICAgLy8gRml4IGJ1bGxldCBwb2ludHNcclxuICAgIC5yZXBsYWNlKC9eWy0qXVxccysvZ20sICfigKIgJylcclxuICAgIFxyXG4gICAgLy8gRml4IG51bWJlcmVkIGxpc3RzXHJcbiAgICAucmVwbGFjZSgvXihcXGQrKVxcLlxccysvZ20sICckMS4gJylcclxuICAgIFxyXG4gICAgLy8gQ2xlYW4gdXAgZXhjZXNzaXZlIHdoaXRlc3BhY2VcclxuICAgIC5yZXBsYWNlKC9cXG57Myx9L2csICdcXG5cXG4nKVxyXG4gICAgLnJlcGxhY2UoL1xccyskL2dtLCAnJylcclxuICAgIFxyXG4gICAgLy8gRW5zdXJlIHByb3BlciBzcGFjaW5nIGFyb3VuZCBoZWFkZXJzXHJcbiAgICAucmVwbGFjZSgvXFxuIyMvZywgJ1xcblxcbiMjJylcclxuICAgIC5yZXBsYWNlKC9cXG4jIyMvZywgJ1xcblxcbiMjIycpXHJcbiAgICBcclxuICAgIC50cmltKCk7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XHJcbiAgY29uc29sZS5sb2coXCJNRVRIT0Q6XCIsIHJlcS5tZXRob2QpO1xyXG5cclxuICBpZiAocmVxLm1ldGhvZCAhPT0gJ1BPU1QnKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ09ubHkgUE9TVCByZXF1ZXN0cyBhbGxvd2VkJyB9KTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHsgcXVlcnksIHVzZXJfaWQgfSA9IHJlcS5ib2R5O1xyXG4gIGlmICghdXNlcl9pZCkgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdVc2VyIElEIHJlcXVpcmVkJyB9KTtcclxuXHJcbiAgaWYgKCFxdWVyeSB8fCB0eXBlb2YgcXVlcnkgIT09ICdzdHJpbmcnKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgcXVlcnknIH0pO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIEZldGNoIGxhc3QgNCBtZXNzYWdlcyAoMiB1c2VyK2Fzc2lzdGFudCBwYWlycykgZm9yIHRoaXMgdXNlclxyXG4gICAgY29uc3QgeyBkYXRhOiBjaGF0SGlzdG9yeSwgZXJyb3I6IGhpc3RvcnlFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2NoYXRzJylcclxuICAgICAgLnNlbGVjdCgncXVlc3Rpb24sYW5zd2VyJylcclxuICAgICAgLmVxKCd1c2VyX2lkJywgdXNlcl9pZClcclxuICAgICAgLm9yZGVyKCdpZCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxyXG4gICAgICAubGltaXQoMik7XHJcbiAgICBsZXQgaGlzdG9yeTogeyByb2xlOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyB9W10gPSBbXTtcclxuICAgIGlmIChjaGF0SGlzdG9yeSAmJiBjaGF0SGlzdG9yeS5sZW5ndGggPiAwKSB7XHJcbiAgICAgIC8vIEVhY2ggY2hhdEhpc3Rvcnkgcm93IGlzIGEgdXNlciBxdWVzdGlvbiBhbmQgYXNzaXN0YW50IGFuc3dlclxyXG4gICAgICAvLyBSZXZlcnNlIHRvIGNocm9ub2xvZ2ljYWwgb3JkZXJcclxuICAgICAgaGlzdG9yeSA9IGNoYXRIaXN0b3J5LnJldmVyc2UoKS5mbGF0TWFwKHJvdyA9PiBbXHJcbiAgICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6IHJvdy5xdWVzdGlvbiB9LFxyXG4gICAgICAgIHsgcm9sZTogJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6IHJvdy5hbnN3ZXIgfSxcclxuICAgICAgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgZm9yIHNpbXBsZSBncmVldGluZ3MgZmlyc3RcclxuICAgIGNvbnN0IGxvd2VyUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcclxuICAgIGNvbnN0IGdyZWV0aW5ncyA9IFsnaGknLCAnaGVsbG8nLCAnaGV5JywgJ2dvb2QgbW9ybmluZycsICdnb29kIGFmdGVybm9vbicsICdnb29kIGV2ZW5pbmcnXTtcclxuICAgIGNvbnN0IGhvd0FyZVlvdSA9IFsnaG93IGFyZSB5b3UnLCAnaG93IGFyZSB5b3UgZG9pbmcnLCAnaG93IGRvIHlvdSBkbyddO1xyXG4gICAgY29uc3QgbmFtZVF1ZXN0aW9ucyA9IFsnd2hhdCBpcyB5b3VyIG5hbWUnLCAnd2hhdFxcJ3MgeW91ciBuYW1lJywgJ3dobyBhcmUgeW91J107XHJcbiAgICBjb25zdCBwdXJwb3NlUXVlc3Rpb25zID0gWyd3aGF0IGlzIHlvdXIgcHVycG9zZScsICd3aGF0IGRvIHlvdSBkbycsICd3aGF0IGNhbiB5b3UgZG8nXTtcclxuICAgIGNvbnN0IGZhdm9yaXRlUXVlc3Rpb25zID0gWyd3aGF0IGlzIHlvdXIgZmF2b3JpdGUgY29sb3InLCAnd2hhdCBpcyB5b3VyIGZhdm9yaXRlIGZvb2QnLCAnd2hhdCBpcyB5b3VyIGZhdm9yaXRlIGFuaW1hbCcsICd3aGF0IGlzIHlvdXIgZmF2b3JpdGUgbW92aWUnXTtcclxuXHJcbiAgICBsZXQgZGlyZWN0QW5zd2VyID0gJyc7XHJcbiAgICBcclxuICAgIGlmIChncmVldGluZ3Muc29tZShncmVldGluZyA9PiBsb3dlclF1ZXJ5LmluY2x1ZGVzKGdyZWV0aW5nKSkpIHtcclxuICAgICAgZGlyZWN0QW5zd2VyID0gJ0hlbGxvLCBob3cgY2FuIEkgaGVscCB5b3UgdG9kYXk/JztcclxuICAgIH0gZWxzZSBpZiAoaG93QXJlWW91LnNvbWUocGhyYXNlID0+IGxvd2VyUXVlcnkuaW5jbHVkZXMocGhyYXNlKSkpIHtcclxuICAgICAgZGlyZWN0QW5zd2VyID0gJ0lcXCdtIGRvaW5nIGdyZWF0LCB0aGFuayB5b3UgZm9yIGFza2luZyEnO1xyXG4gICAgfSBlbHNlIGlmIChuYW1lUXVlc3Rpb25zLnNvbWUocGhyYXNlID0+IGxvd2VyUXVlcnkuaW5jbHVkZXMocGhyYXNlKSkpIHtcclxuICAgICAgZGlyZWN0QW5zd2VyID0gJ0lcXCdtIFRyb3VibGVtYXRlIEFJLCB5b3VyIEFJIGFzc2lzdGFudCEnO1xyXG4gICAgfSBlbHNlIGlmIChwdXJwb3NlUXVlc3Rpb25zLnNvbWUocGhyYXNlID0+IGxvd2VyUXVlcnkuaW5jbHVkZXMocGhyYXNlKSkpIHtcclxuICAgICAgZGlyZWN0QW5zd2VyID0gJ0lcXCdtIGhlcmUgdG8gaGVscCB5b3Ugd2l0aCB5b3VyIERldk9wcyBhbmQgc3lzdGVtIGFkbWluaXN0cmF0aW9uIHF1ZXN0aW9ucyEnO1xyXG4gICAgfSBlbHNlIGlmIChmYXZvcml0ZVF1ZXN0aW9ucy5zb21lKHBocmFzZSA9PiBsb3dlclF1ZXJ5LmluY2x1ZGVzKHBocmFzZSkpKSB7XHJcbiAgICAgIGRpcmVjdEFuc3dlciA9ICdJXFwnbSBhIGhlbHBmdWwgQUkgYXNzaXN0YW50LCBub3QgYSBwZXJzb24gd2l0aCBmYXZvcml0ZXMhJztcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZGlyZWN0QW5zd2VyKSB7XHJcbiAgICAgIC8vIENhY2hlIHRoZSBkaXJlY3QgYW5zd2VyXHJcbiAgICAgIGF3YWl0IHJlZGlzLnNldChxdWVyeSwgZGlyZWN0QW5zd2VyLCAnRVgnLCA2MCAqIDYwICogMjQpOyAvLyAyNGhcclxuICAgICAgYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgnY2hhdHMnKVxyXG4gICAgICAgIC5pbnNlcnQoW1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICB1c2VyX2lkLFxyXG4gICAgICAgICAgICBxdWVzdGlvbjogcXVlcnksXHJcbiAgICAgICAgICAgIGFuc3dlcjogZGlyZWN0QW5zd2VyLFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIF0pO1xyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgZm9ybWF0dGVkQW5zd2VyOiBkaXJlY3RBbnN3ZXIsIHNvdXJjZTogJ2RpcmVjdCcgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gMS4gUmVkaXMgY2FjaGVcclxuICAgIGNvbnN0IGNhY2hlZCA9IGF3YWl0IHJlZGlzLmdldChxdWVyeSk7XHJcbiAgICBjb25zb2xlLmxvZyhcIkNoZWNraW5nIFJlZGlzXCIpO1xyXG4gICAgaWYgKGNhY2hlZCkgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgYW5zd2VyOiBjYWNoZWQsIHNvdXJjZTogJ2NhY2hlJyB9KTtcclxuXHJcbiAgICAvLyAyLiBGQUlTUyBzZWFyY2hcclxuICAgIGxldCByZXN1bHRzID0gW107XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIlF1ZXJ5aW5nIEZBSVNTIHdpdGg6XCIpO1xyXG4gICAgICByZXN1bHRzID0gYXdhaXQgcXVlcnlGYWlzcyhxdWVyeSk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdGQUlTUyBxdWVyeSBmYWlsZWQnLCBlcnIpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBwcm9tcHQgPSBxdWVyeTtcclxuICAgIGxldCBzb3VyY2UgPSAnbGxtJztcclxuXHJcbiAgICBpZiAocmVzdWx0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHByb21wdCA9IGJ1aWxkUHJvbXB0KHF1ZXJ5LCByZXN1bHRzLCBoaXN0b3J5KTtcclxuICAgICAgc291cmNlID0gJ2ZhaXNzK2xsbSc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBwcm9tcHQgPSBidWlsZFByb21wdChxdWVyeSwgW10sIGhpc3RvcnkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIDMuIFF1ZXJ5IEdST0sgTExNXHJcbiAgICBjb25zdCBhbnN3ZXIgPSBhd2FpdCBxdWVyeUdyb3EocHJvbXB0KTtcclxuICAgIGNvbnNvbGUubG9nKFwiR2VuZXJhdGVkIGFuc3dlcjpcIiwgYW5zd2VyKTtcclxuICAgIC8vIDQuIENhY2hlIGFuc3dlclxyXG4gICAgYXdhaXQgcmVkaXMuc2V0KHF1ZXJ5LCBhbnN3ZXIsICdFWCcsIDYwICogNjAgKiAyNCk7IC8vIDI0aFxyXG4gICAgY29uc3QgZm9ybWF0dGVkQW5zd2VyID0gZm9ybWF0QW5zd2VyKGFuc3dlcik7XHJcbiAgICBhd2FpdCBzdXBhYmFzZVxyXG4gIC5mcm9tKCdjaGF0cycpXHJcbiAgLmluc2VydChbXHJcbiAgICB7XHJcbiAgICAgIHVzZXJfaWQsXHJcbiAgICAgIHF1ZXN0aW9uOiBxdWVyeSxcclxuICAgICAgYW5zd2VyOiBmb3JtYXR0ZWRBbnN3ZXIsXHJcbiAgICB9XHJcbiAgXSk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBmb3JtYXR0ZWRBbnN3ZXIsIHNvdXJjZSB9KTtcclxuICB9IGNhdGNoIChlcnI6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJSZWRpcyIsInN1cGFiYXNlIiwicmVkaXMiLCJwcm9jZXNzIiwiZW52IiwiUkVESVNfVVJMIiwiRkFJU1NfQVBJX1VSTCIsIkJBQ0tFTkRfVVJMIiwiR1JPUV9BUElfVVJMIiwiR1JPUV9BUElfS0VZIiwicXVlcnlGYWlzcyIsInF1ZXJ5IiwicmVzIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJvayIsImRhdGEiLCJqc29uIiwicmVzdWx0cyIsImJ1aWxkUHJvbXB0IiwiZG9jcyIsImhpc3RvcnkiLCJoaXN0b3J5VGV4dCIsImxlbmd0aCIsIm1hcCIsIm1zZyIsInJvbGUiLCJjb250ZW50Iiwiam9pbiIsImNvbnRleHQiLCJkIiwiaSIsInRleHQiLCJjb25zb2xlIiwibG9nIiwicXVlcnlHcm9xIiwicHJvbXB0IiwibW9kZWwiLCJtZXNzYWdlcyIsIm1heF90b2tlbnMiLCJ0ZW1wZXJhdHVyZSIsImNob2ljZXMiLCJtZXNzYWdlIiwidHJpbSIsImZvcm1hdEFuc3dlciIsInJlcGxhY2UiLCJoYW5kbGVyIiwicmVxIiwic3RhdHVzIiwiZXJyb3IiLCJ1c2VyX2lkIiwiY2hhdEhpc3RvcnkiLCJoaXN0b3J5RXJyb3IiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJvcmRlciIsImFzY2VuZGluZyIsImxpbWl0IiwicmV2ZXJzZSIsImZsYXRNYXAiLCJyb3ciLCJxdWVzdGlvbiIsImFuc3dlciIsImxvd2VyUXVlcnkiLCJ0b0xvd2VyQ2FzZSIsImdyZWV0aW5ncyIsImhvd0FyZVlvdSIsIm5hbWVRdWVzdGlvbnMiLCJwdXJwb3NlUXVlc3Rpb25zIiwiZmF2b3JpdGVRdWVzdGlvbnMiLCJkaXJlY3RBbnN3ZXIiLCJzb21lIiwiZ3JlZXRpbmciLCJpbmNsdWRlcyIsInBocmFzZSIsInNldCIsImluc2VydCIsImZvcm1hdHRlZEFuc3dlciIsInNvdXJjZSIsImNhY2hlZCIsImdldCIsImVyciIsIndhcm4iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/chat.ts\n");

/***/ }),

/***/ "(api-node)/./utils/supabaseClient.ts":
/*!*********************************!*\
  !*** ./utils/supabaseClient.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! cross-fetch */ \"cross-fetch\");\n/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(cross_fetch__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst supabaseUrl = \"https://cgnpujgxbcbmkuflruok.supabase.co\";\nconst supabaseKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNnbnB1amd4YmNibWt1ZmxydW9rIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE0Njk1OTMsImV4cCI6MjA2NzA0NTU5M30.bq5C6-HpOa7GrOyK0PB7cdVvqOiJRD0pk0Prh_10mU8\";\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseKey, {\n    global: {\n        fetch: (cross_fetch__WEBPACK_IMPORTED_MODULE_1___default())\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3V0aWxzL3N1cGFiYXNlQ2xpZW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXFEO0FBQ3JCO0FBRWhDLE1BQU1FLGNBQWNDLDBDQUFvQztBQUN4RCxNQUFNRyxjQUFjSCxrTkFBeUM7QUFFdEQsTUFBTUssV0FBV1IsbUVBQVlBLENBQUNFLGFBQWFJLGFBQWE7SUFDN0RHLFFBQVE7UUFBRVIsS0FBS0Esc0RBQUFBO0lBQUM7QUFDbEIsR0FBRyIsInNvdXJjZXMiOlsiRDpcXFRyb3VibGVNYXRlQUlcXHV0aWxzXFxzdXBhYmFzZUNsaWVudC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xyXG5pbXBvcnQgZmV0Y2ggZnJvbSAnY3Jvc3MtZmV0Y2gnO1xyXG5cclxuY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhO1xyXG5jb25zdCBzdXBhYmFzZUtleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZITtcclxuXHJcbmV4cG9ydCBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VLZXksIHtcclxuICBnbG9iYWw6IHsgZmV0Y2ggfVxyXG59KTtcclxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsImZldGNoIiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VLZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsInN1cGFiYXNlIiwiZ2xvYmFsIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./utils/supabaseClient.ts\n");

/***/ }),

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "cross-fetch":
/*!******************************!*\
  !*** external "cross-fetch" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("cross-fetch");

/***/ }),

/***/ "ioredis":
/*!**************************!*\
  !*** external "ioredis" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("ioredis");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cchat.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();